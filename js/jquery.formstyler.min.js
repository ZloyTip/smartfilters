(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{if(typeof exports==="object"){module.exports=a($||require("jquery"))}else{a(jQuery)}}}(function(d){var c="styler",e={idSuffix:"-styler",filePlaceholder:"Файл не выбран",fileBrowse:"Обзор...",fileNumber:"Выбрано файлов: %s",selectPlaceholder:"Выберите...",selectSearch:false,selectSearchLimit:10,selectSearchNotFound:"Совпадений не найдено",selectSearchPlaceholder:"Поиск...",selectVisibleOptions:0,selectSmartPositioning:true,locale:"ru",locales:{en:{filePlaceholder:"No file selected",fileBrowse:"Browse...",fileNumber:"Selected files: %s",selectPlaceholder:"Select...",selectSearchNotFound:"No matches found",selectSearchPlaceholder:"Search..."}},onSelectOpened:function(){},onSelectClosed:function(){},onFormStyled:function(){}};function a(h,g){this.element=h;this.options=d.extend({},e,g);var f=this.options.locale;if(this.options.locales[f]!==undefined){d.extend(this.options,this.options.locales[f])}this.init()}a.prototype={init:function(){var i=d(this.element);var h=this.options;var k=(navigator.userAgent.match(/(iPad|iPhone|iPod)/i)&&!navigator.userAgent.match(/(Windows\sPhone)/i))?true:false;var l=(navigator.userAgent.match(/Android/i)&&!navigator.userAgent.match(/(Windows\sPhone)/i))?true:false;function j(){if(i.attr("id")!==undefined&&i.attr("id")!==""){this.id=i.attr("id")+h.idSuffix}this.title=i.attr("title");this.classes=i.attr("class");this.data=i.data()}if(i.is(":checkbox")){var n=function(){var p=new j();var q=d('<div class="jq-checkbox"><div class="jq-checkbox__div"></div></div>').attr({id:p.id,title:p.title}).addClass(p.classes).data(p.data);i.after(q).prependTo(q);if(i.is(":checked")){q.addClass("checked")}if(i.is(":disabled")){q.addClass("disabled")}q.click(function(r){r.preventDefault();i.triggerHandler("click");if(!q.is(".disabled")){if(i.is(":checked")){i.prop("checked",false);q.removeClass("checked")}else{i.prop("checked",true);q.addClass("checked")}i.focus().change()}});i.closest("label").add('label[for="'+i.attr("id")+'"]').on("click.styler",function(r){if(!d(r.target).is("a")&&!d(r.target).closest(q).length){q.triggerHandler("click");r.preventDefault()}});i.on("change.styler",function(){if(i.is(":checked")){q.addClass("checked")}else{q.removeClass("checked")}}).on("keydown.styler",function(r){if(r.which==32){q.click()}}).on("focus.styler",function(){if(!q.is(".disabled")){q.addClass("focused")}}).on("blur.styler",function(){q.removeClass("focused")})};n();i.on("refresh",function(){i.closest("label").add('label[for="'+i.attr("id")+'"]').off(".styler");i.off(".styler").parent().before(i).remove();n()})}else{if(i.is(":radio")){var o=function(){var p=new j();var q=d('<div class="jq-radio"><div class="jq-radio__div"></div></div>').attr({id:p.id,title:p.title}).addClass(p.classes).data(p.data);i.after(q).prependTo(q);if(i.is(":checked")){q.addClass("checked")}if(i.is(":disabled")){q.addClass("disabled")}d.fn.commonParents=function(){var r=this;return r.first().parents().filter(function(){return d(this).find(r).length===r.length})};d.fn.commonParent=function(){return d(this).commonParents().first()};q.click(function(s){s.preventDefault();i.triggerHandler("click");if(!q.is(".disabled")){var r=d('input[name="'+i.attr("name")+'"]');r.commonParent().find(r).prop("checked",false).parent().removeClass("checked");i.prop("checked",true).parent().addClass("checked");i.focus().change()}});i.closest("label").add('label[for="'+i.attr("id")+'"]').on("click.styler",function(r){if(!d(r.target).is("a")&&!d(r.target).closest(q).length){q.triggerHandler("click");r.preventDefault()}});i.on("change.styler",function(){i.parent().addClass("checked")}).on("focus.styler",function(){if(!q.is(".disabled")){q.addClass("focused")}}).on("blur.styler",function(){q.removeClass("focused")})};o();i.on("refresh",function(){i.closest("label").add('label[for="'+i.attr("id")+'"]').off(".styler");i.off(".styler").parent().before(i).remove();o()})}else{if(i.is(":file")){var g=function(){var p=new j();var u=i.data("placeholder");if(u===undefined){u=h.filePlaceholder}var s=i.data("browse");if(s===undefined||s===""){s=h.fileBrowse}var r=d('<div class="jq-file"><div class="jq-file__name">'+u+'</div><div class="jq-file__browse">'+s+"</div></div>").attr({id:p.id,title:p.title}).addClass(p.classes).data(p.data);i.after(r).appendTo(r);if(i.is(":disabled")){r.addClass("disabled")}var t=i.val();var q=d("div.jq-file__name",r);if(t){q.text(t.replace(/.+[\\\/]/,""))}i.on("change.styler",function(){var x=i.val();if(i.is("[multiple]")){x="";var w=i[0].files.length;if(w>0){var v=i.data("number");if(v===undefined){v=h.fileNumber}v=v.replace("%s",w);x=v}}q.text(x.replace(/.+[\\\/]/,""));if(x===""){q.text(u);r.removeClass("changed")}else{r.addClass("changed")}}).on("focus.styler",function(){r.addClass("focused")}).on("blur.styler",function(){r.removeClass("focused")}).on("click.styler",function(){r.removeClass("focused")})};g();i.on("refresh",function(){i.off(".styler").parent().before(i).remove();g()})}else{if(i.is('input[type="number"]')){var f=function(){var r=new j();var v=d('<div class="jq-number"><div class="jq-number__spin minus"></div><div class="jq-number__spin plus"></div></div>').attr({id:r.id,title:r.title}).addClass(r.classes).data(r.data);i.after(v).prependTo(v).wrap('<div class="jq-number__field"></div>');if(i.is(":disabled")){v.addClass("disabled")}var s,p,u,w=null,q=null;if(i.attr("min")!==undefined){s=i.attr("min")}if(i.attr("max")!==undefined){p=i.attr("max")}if(i.attr("step")!==undefined&&d.isNumeric(i.attr("step"))){u=Number(i.attr("step"))}else{u=Number(1)}var t=function(B){var y=i.val(),z;if(!d.isNumeric(y)){y=0;i.val("0")}if(B.is(".minus")){z=Number(y)-u}else{if(B.is(".plus")){z=Number(y)+u}}var x=(u.toString().split(".")[1]||[]).length;if(x>0){var A="1";while(A.length<=x){A=A+"0"}z=Math.round(z*A)/A}if(d.isNumeric(s)&&d.isNumeric(p)){if(z>=s&&z<=p){i.val(z)}}else{if(d.isNumeric(s)&&!d.isNumeric(p)){if(z>=s){i.val(z)}}else{if(!d.isNumeric(s)&&d.isNumeric(p)){if(z<=p){i.val(z)}}else{i.val(z)}}}};if(!v.is(".disabled")){v.on("mousedown","div.jq-number__spin",function(){var x=d(this);t(x);w=setTimeout(function(){q=setInterval(function(){t(x)},40)},350)}).on("mouseup mouseout","div.jq-number__spin",function(){clearTimeout(w);clearInterval(q)}).on("mouseup","div.jq-number__spin",function(){i.change().trigger("input")});i.on("focus.styler",function(){v.addClass("focused")}).on("blur.styler",function(){v.removeClass("focused")})}};f();i.on("refresh",function(){i.off(".styler").closest(".jq-number").before(i).remove();f()})}else{if(i.is("select")){var m=function(){function q(v){var y=v.prop("scrollHeight")-v.outerHeight(),w=null,x=null;v.off("mousewheel DOMMouseScroll").on("mousewheel DOMMouseScroll",function(z){w=(z.originalEvent.detail<0||z.originalEvent.wheelDelta>0)?1:-1;x=v.scrollTop();if((x>=y&&w<0)||(x<=0&&w>0)){z.stopPropagation();z.preventDefault()}})}var t=d("option",i);var u="";function s(){for(var B=0;B<t.length;B++){var C=t.eq(B);var I="",J="",G="",w="",H="",F="",x="",E="",v="";var z="disabled";var D="selected sel disabled";if(C.prop("selected")){J="selected sel"}if(C.is(":disabled")){J=z}if(C.is(":selected:disabled")){J=D}if(C.attr("id")!==undefined&&C.attr("id")!==""){w=' id="'+C.attr("id")+h.idSuffix+'"'}if(C.attr("title")!==undefined&&t.attr("title")!==""){H=' title="'+C.attr("title")+'"'}if(C.attr("class")!==undefined){x=" "+C.attr("class");v=' data-jqfs-class="'+C.attr("class")+'"'}var A=C.data();for(var y in A){if(A[y]!==""){F+=" data-"+y+'="'+A[y]+'"'}}if((J+x)!==""){G=' class="'+J+x+'"'}I="<li"+v+F+G+H+w+">"+C.html()+"</li>";if(C.parent().is("optgroup")){if(C.parent().attr("class")!==undefined){E=" "+C.parent().attr("class")}I="<li"+v+F+' class="'+J+x+" option"+E+'"'+H+w+">"+C.html()+"</li>";if(C.is(":first-child")){I='<li class="optgroup'+E+'">'+C.parent().attr("label")+"</li>"+I}}u+=I}}function p(){var Q=new j();var R="";var w=i.data("placeholder");var T=i.data("search");var B=i.data("search-limit");var E=i.data("search-not-found");var C=i.data("search-placeholder");var D=i.data("smart-positioning");if(w===undefined){w=h.selectPlaceholder}if(T===undefined||T===""){T=h.selectSearch}if(B===undefined||B===""){B=h.selectSearchLimit}if(E===undefined||E===""){E=h.selectSearchNotFound}if(C===undefined){C=h.selectSearchPlaceholder}if(D===undefined||D===""){D=h.selectSmartPositioning}var V=d('<div class="jq-selectbox jqselect"><div class="jq-selectbox__select"><div class="jq-selectbox__select-text"></div><div class="jq-selectbox__trigger"><div class="jq-selectbox__trigger-arrow"></div></div></div></div>').attr({id:Q.id,title:Q.title}).addClass(Q.classes).data(Q.data);i.after(V).prependTo(V);var I=V.css("z-index");I=(I>0)?I:1;var M=d("div.jq-selectbox__select",V);var L=d("div.jq-selectbox__select-text",V);var v=t.filter(":selected");s();if(T){R='<div class="jq-selectbox__search"><input type="search" autocomplete="off" placeholder="'+C+'"></div><div class="jq-selectbox__not-found">'+E+"</div>"}var S=d('<div class="jq-selectbox__dropdown">'+R+"<ul>"+u+"</ul></div>");V.append(S);var O=d("ul",S);var N=d("li",S);var G=d("input",S);var A=d("div.jq-selectbox__not-found",S).hide();if(N.length<B){G.parent().hide()}if(t.first().text()===""&&t.first().is(":selected")&&w!==false){L.text(w).addClass("placeholder")}else{L.text(v.text())}var x=0,z=0;N.css({display:"inline-block"});N.each(function(){var Y=d(this);if(Y.innerWidth()>x){x=Y.innerWidth();z=Y.width()}});N.css({display:""});if(L.is(".placeholder")&&(L.width()>x)){L.width(L.width())}else{var y=V.clone().appendTo("body").width("auto");var K=y.outerWidth();y.remove();if(K==V.outerWidth()){L.width(z)}}if(x>V.width()){S.width(x)}if(t.first().text()===""&&i.data("placeholder")!==""){N.first().hide()}var W=V.outerHeight(true);var H=G.parent().outerHeight(true)||0;var J=O.css("max-height");var U=N.filter(".selected");if(U.length<1){N.first().addClass("selected sel")}if(N.data("li-height")===undefined){var F=N.outerHeight();if(w!==false){F=N.eq(1).outerHeight()}N.data("li-height",F)}var X=S.css("top");if(S.css("left")=="auto"){S.css({left:0})}if(S.css("top")=="auto"){S.css({top:W});X=W}S.hide();if(U.length){if(t.first().text()!=v.text()){V.addClass("changed")}V.data("jqfs-class",U.data("jqfs-class"));V.addClass(U.data("jqfs-class"))}if(i.is(":disabled")){V.addClass("disabled");return false}M.click(function(){if(d("div.jq-selectbox").filter(".opened").length){h.onSelectClosed.call(d("div.jq-selectbox").filter(".opened"))}i.focus();if(k){return}var ad=d(window);var af=N.data("li-height");var ac=V.offset().top;var Z=ad.height()-W-(ac-ad.scrollTop());var aa=i.data("visible-options");if(aa===undefined||aa===""){aa=h.selectVisibleOptions}var ag=af*5;var Y=af*aa;if(aa>0&&aa<6){ag=Y}if(aa===0){Y="auto"}var ab=function(){S.height("auto").css({bottom:"auto",top:X});var ah=function(){O.css("max-height",Math.floor((Z-20-H)/af)*af)};ah();O.css("max-height",Y);if(J!="none"){O.css("max-height",J)}if(Z<(S.outerHeight()+20)){ah()}};var ae=function(){S.height("auto").css({top:"auto",bottom:X});var ah=function(){O.css("max-height",Math.floor((ac-ad.scrollTop()-20-H)/af)*af)};ah();O.css("max-height",Y);if(J!="none"){O.css("max-height",J)}if((ac-ad.scrollTop()-20)<(S.outerHeight()+20)){ah()}};if(D===true||D===1){if(Z>(ag+H+20)){ab();V.removeClass("dropup").addClass("dropdown")}else{ae();V.removeClass("dropdown").addClass("dropup")}}else{if(D===false||D===0){if(Z>(ag+H+20)){ab();V.removeClass("dropup").addClass("dropdown")}}else{S.height("auto").css({bottom:"auto",top:X});O.css("max-height",Y);if(J!="none"){O.css("max-height",J)}}}if(V.offset().left+S.outerWidth()>ad.width()){S.css({left:"auto",right:0})}d("div.jqselect").css({zIndex:(I-1)}).removeClass("opened");V.css({zIndex:I});if(S.is(":hidden")){d("div.jq-selectbox__dropdown:visible").hide();S.show();V.addClass("opened focused");h.onSelectOpened.call(V)}else{S.hide();V.removeClass("opened dropup dropdown");if(d("div.jq-selectbox").filter(".opened").length){h.onSelectClosed.call(V)}}if(G.length){G.val("").keyup();A.hide();G.keyup(function(){var ah=d(this).val();N.each(function(){if(!d(this).html().match(new RegExp(".*?"+ah+".*?","i"))){d(this).hide()}else{d(this).show()}});if(t.first().text()===""&&i.data("placeholder")!==""){N.first().hide()}if(N.filter(":visible").length<1){A.show()}else{A.hide()}})}if(N.filter(".selected").length){if(i.val()===""){O.scrollTop(0)}else{if((O.innerHeight()/af)%2!==0){af=af/2}O.scrollTop(O.scrollTop()+N.filter(".selected").position().top-O.innerHeight()/2+af)}}q(O)});N.hover(function(){d(this).siblings().removeClass("selected")});var P=N.filter(".selected").text();N.filter(":not(.disabled):not(.optgroup)").click(function(){i.focus();var aa=d(this);var Y=aa.text();if(!aa.is(".selected")){var Z=aa.index();Z-=aa.prevAll(".optgroup").length;aa.addClass("selected sel").siblings().removeClass("selected sel");t.prop("selected",false).eq(Z).prop("selected",true);P=Y;L.text(Y);if(V.data("jqfs-class")){V.removeClass(V.data("jqfs-class"))}V.data("jqfs-class",aa.data("jqfs-class"));V.addClass(aa.data("jqfs-class"));i.change()}S.hide();V.removeClass("opened dropup dropdown");h.onSelectClosed.call(V)});S.mouseout(function(){d("li.sel",S).addClass("selected")});i.on("change.styler",function(){L.text(t.filter(":selected").text()).removeClass("placeholder");N.removeClass("selected sel").not(".optgroup").eq(i[0].selectedIndex).addClass("selected sel");if(t.first().text()!=N.filter(".selected").text()){V.addClass("changed")}else{V.removeClass("changed")}}).on("focus.styler",function(){V.addClass("focused");d("div.jqselect").not(".focused").removeClass("opened dropup dropdown").find("div.jq-selectbox__dropdown").hide()}).on("blur.styler",function(){V.removeClass("focused")}).on("keydown.styler keyup.styler",function(Z){var Y=N.data("li-height");if(i.val()===""){L.text(w).addClass("placeholder")}else{L.text(t.filter(":selected").text())}N.removeClass("selected sel").not(".optgroup").eq(i[0].selectedIndex).addClass("selected sel");if(Z.which==38||Z.which==37||Z.which==33||Z.which==36){if(i.val()===""){O.scrollTop(0)}else{O.scrollTop(O.scrollTop()+N.filter(".selected").position().top)}}if(Z.which==40||Z.which==39||Z.which==34||Z.which==35){O.scrollTop(O.scrollTop()+N.filter(".selected").position().top-O.innerHeight()+Y)}if(Z.which==13){Z.preventDefault();S.hide();V.removeClass("opened dropup dropdown");h.onSelectClosed.call(V)}}).on("keydown.styler",function(Y){if(Y.which==32){Y.preventDefault();M.click()}});if(!b.registered){d(document).on("click",b);b.registered=true}}function r(){var y=new j();var w=d('<div class="jq-select-multiple jqselect"></div>').attr({id:y.id,title:y.title}).addClass(y.classes).data(y.data);i.after(w);s();w.append("<ul>"+u+"</ul>");var A=d("ul",w);var v=d("li",w);var z=i.attr("size");var B=A.outerHeight();var x=v.outerHeight();if(z!==undefined&&z>0){A.css({height:x*z})}else{A.css({height:x*4})}if(B>w.height()){A.css("overflowY","scroll");q(A);if(v.filter(".selected").length){A.scrollTop(A.scrollTop()+v.filter(".selected").position().top)}}i.prependTo(w);if(i.is(":disabled")){w.addClass("disabled");t.each(function(){if(d(this).is(":selected")){v.eq(d(this).index()).addClass("selected")}})}else{v.filter(":not(.disabled):not(.optgroup)").click(function(F){i.focus();var C=d(this);if(!F.ctrlKey&&!F.metaKey){C.addClass("selected")}if(!F.shiftKey){C.addClass("first")}if(!F.ctrlKey&&!F.metaKey&&!F.shiftKey){C.siblings().removeClass("selected first")}if(F.ctrlKey||F.metaKey){if(C.is(".selected")){C.removeClass("selected first")}else{C.addClass("selected first")}C.siblings().removeClass("first")}if(F.shiftKey){var E=false,D=false;C.siblings().removeClass("selected").siblings(".first").addClass("selected");C.prevAll().each(function(){if(d(this).is(".first")){E=true}});C.nextAll().each(function(){if(d(this).is(".first")){D=true}});if(E){C.prevAll().each(function(){if(d(this).is(".selected")){return false}else{d(this).not(".disabled, .optgroup").addClass("selected")}})}if(D){C.nextAll().each(function(){if(d(this).is(".selected")){return false}else{d(this).not(".disabled, .optgroup").addClass("selected")}})}if(v.filter(".selected").length==1){C.addClass("first")}}t.prop("selected",false);v.filter(".selected").each(function(){var H=d(this);var G=H.index();if(H.is(".option")){G-=H.prevAll(".optgroup").length}t.eq(G).prop("selected",true)});i.change()});t.each(function(C){d(this).data("optionIndex",C)});i.on("change.styler",function(){v.removeClass("selected");var C=[];t.filter(":selected").each(function(){C.push(d(this).data("optionIndex"))});v.not(".optgroup").filter(function(D){return d.inArray(D,C)>-1}).addClass("selected")}).on("focus.styler",function(){w.addClass("focused")}).on("blur.styler",function(){w.removeClass("focused")});if(B>w.height()){i.on("keydown.styler",function(C){if(C.which==38||C.which==37||C.which==33){A.scrollTop(A.scrollTop()+v.filter(".selected").position().top-x)}if(C.which==40||C.which==39||C.which==34){A.scrollTop(A.scrollTop()+v.filter(".selected:last").position().top-A.innerHeight()+x*2)}})}}}if(i.is("[multiple]")){if(l||k){return}r()}else{p()}};m();i.on("refresh",function(){i.off(".styler").parent().before(i).remove();m()})}else{if(i.is(":reset")){i.on("click",function(){setTimeout(function(){i.closest("form").find("input, select").trigger("refresh")},1)})}}}}}}},destroy:function(){var f=d(this.element);if(f.is(":checkbox")||f.is(":radio")){f.removeData("_"+c).off(".styler refresh").removeAttr("style").parent().before(f).remove();f.closest("label").add('label[for="'+f.attr("id")+'"]').off(".styler")}else{if(f.is('input[type="number"]')){f.removeData("_"+c).off(".styler refresh").closest(".jq-number").before(f).remove()}else{if(f.is(":file")||f.is("select")){f.removeData("_"+c).off(".styler refresh").removeAttr("style").parent().before(f).remove()}}}}};d.fn[c]=function(g){var f=arguments;if(g===undefined||typeof g==="object"){this.each(function(){if(!d.data(this,"_"+c)){d.data(this,"_"+c,new a(this,g))}}).promise().done(function(){var i=d(this[0]).data("_"+c);if(i){i.options.onFormStyled.call()}});return this}else{if(typeof g==="string"&&g[0]!=="_"&&g!=="init"){var h;this.each(function(){var i=d.data(this,"_"+c);if(i instanceof a&&typeof i[g]==="function"){h=i[g].apply(i,Array.prototype.slice.call(f,1))}});return h!==undefined?h:this}}};function b(i){if(!d(i.target).parents().hasClass("jq-selectbox")&&i.target.nodeName!="OPTION"){if(d("div.jq-selectbox.opened").length){var f=d("div.jq-selectbox.opened"),h=d("div.jq-selectbox__search input",f),j=d("div.jq-selectbox__dropdown",f),g=f.find("select").data("_"+c).options;g.onSelectClosed.call(f);if(h.length){h.val("").keyup()}j.hide().find("li.sel").addClass("selected");f.removeClass("focused opened dropup dropdown")}}}b.registered=false}));