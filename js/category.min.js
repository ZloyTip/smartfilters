(function(a){a.fn.smartfilters=function(b){var e,d=a.extend({content_selector:"#smartfiltercontent",product_list_selector:"#product-list",afterFilter:function(){}},b),c=this;a("input,select",c).change(function(){if(e){clearTimeout(e)}e=setTimeout(function(){c.find("form").trigger("submit")},500)});a("form",c).submit(function(h){h.preventDefault();a(d.product_list_selector).html('<div class="smartfilter_loader"/>');var f=a(this).attr("action"),g=a(this).serialize();a.ajax({url:f,data:g,dataType:"html",complete:function(){},success:function(i){a(d.content_selector).html(i);if(typeof d.afterFilter==="function"){d.afterFilter()}},fail:function(){window.location=this.url}})});a('input[type="submit"]',c).hide();if(a.ui&&a.ui.slider){a(".slider",c).each(function(){if(!a(this).find(".filter-slider").length){a(this).append('<div class="filter-slider"></div>')}else{return}var i=a(this).find(".min"),f=a(this).find(".max"),g=parseFloat(i.attr("placeholder")),m=parseFloat(f.attr("placeholder")),k=1,j=a(this).find(".filter-slider");if(j.data("step")){k=parseFloat(j.data("step"))}else{var l=m-g;k=l/10;var h=0;while(k<1){k*=10;h+=1}k=Math.pow(10,-h);h=Math.round(100000*Math.abs(Math.round(g)-g))/100000;if(h&&h<k){k=h}h=Math.round(100000*Math.abs(Math.round(m)-m))/100000;if(h&&h<k){k=h}}j.slider({range:true,min:g,max:m,step:k,values:[parseFloat(i.val().length?i.val():g),parseFloat(f.val().length?f.val():m)],slide:function(o,p){var n=p.values[0]==a(this).slider("option","min")?"":p.values[0];i.val(n);n=p.values[1]==a(this).slider("option","max")?"":p.values[1];f.val(n)},stop:function(n,o){i.change()}});i.add(f).change(function(){var o=i.val()===""?j.slider("option","min"):parseFloat(i.val());var n=f.val()===""?j.slider("option","max"):parseFloat(f.val());if(n>=o){j.slider("option","values",[o,n])}})})}}})(jQuery);